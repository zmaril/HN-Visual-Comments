<html><head><link rel="stylesheet" type="text/css" href="http://ycombinator.com/news.css">
<link rel="shortcut icon" href="http://ycombinator.com/favicon.ico">
<script>
function byId(id) {
  return document.getElementById(id);
}

function vote(node) {
  var v = node.id.split(/_/);   // {'up', '123'}
  var item = v[1]; 

  // hide arrows
  byId('up_'   + item).style.visibility = 'hidden';
  byId('down_' + item).style.visibility = 'hidden';

  // ping server
  var ping = new Image();
  ping.src = node.href;

  return false; // cancel browser nav
} </script><title>tptacek's comments | Hacker News</title></head><body><center><table border=0 cellpadding=0 cellspacing=0 width="85%" bgcolor=#f6f6ef><tr><td bgcolor=#ff6600><table border=0 cellpadding=0 cellspacing=0 width="100%" style="padding:2px"><tr><td style="width:18px;padding-right:4px"><a href="http://ycombinator.com"><img src="http://ycombinator.com/images/y18.gif" width=18 height=18 style="border:1px #ffffff solid;"></img></a></td><td style="line-height:12pt; height:10px;"><span class="pagetop"><b><a href="news">Hacker News</a></b><img src="http://ycombinator.com/images/s.gif" height=1 width=10><a href="newest">new</a> | <a href="newcomments">comments</a> | <a href="ask">ask</a> | <a href="jobs">jobs</a> | <a href="submit">submit</a> | <font color=#ffffff>tptacek's comments</font></span></td><td style="text-align:right;padding-right:4px;"><span class="pagetop"><a href="newslogin?whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">login</a></span></td></tr></table></td></tr><tr style="height:10px"></tr><tr><td><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3523317 href="vote?for=3523317&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523317></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3523317">link</a> | <a href="item?id=3522883">parent</a> | on: <a href="item?id=3522883">Ask HN: My cofounder is pregnant, what should I do...</a></span></div><br>
<span class="comment"><font color=#000000>Male. Parent. First kid born during a startup I founded. My spouse works with me in my current startup, reads and occasionally posts here, and will smack me down publicly if I'm wrong about this.<p>(1) A full year isn't "maternity leave". Companies are (reasonably) expected to work around maternity leave, but professional moms routinely come back to work a few months after giving birth. Staying at home with a baby for a year is totally reasonable, but casting that as "maternity leave" is less reasonable.<p>(2) But please note that there may be benefits-related reasons to maintain employment status or calling a stretch  of time "maternity leave". The next 9-12 months are going to be health-insurance-intensive. COBRA is very expensive and suboptimal for other reasons too.<p>(3) If neither of you have left your day jobs, neither of you have started the company yet, and this is all a moot point.<p>(4) All else equal, the primary thing you're valuing with founder equity is risk taken. Outside of exceptional circumstances, you shouldn't be giving equal allocations to people who aren't full-time at the company. But re-read point (2) and don't look for reasons to call someone "not full time" when they are effectively full time. There are also knobs you can turn here; for instance, if cash flow is the biggest problem in the first year of the company, and your cofounder is still pulling in a salary, maybe she can kick some back to the company to retain status. Or maybe you can keep the allocations simple but start the vesting clock for her later than yours.<p>(5) Remember that your startup idea, as excited as you may be about it, is <i>going to fail</i>. Virtually all of them do. There is an overwhelming survivorship bias in the stories we read online about startups. You will have 100 better ideas for startups over the next couple years. You will <i>not</i> find 100 ultra-compatible cofounders. So another knob you can turn: keep this current idea small and side-project-y, don't go out of your way to grow it, wait out the new parenthood stuff, and then pick something else up next year.</font></span><p><font size=1><u><a href="reply?id=3523317&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3525608 href="vote?for=3525608&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3525608></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=abbasmehdi">abbasmehdi</a> 7 days ago  | <a href="item?id=3525608">link</a></span></div><br>
<span class="comment"><font color=#000000>Great points. I would also suggest:<p>Ask her what her thoughts are <i>without</i> giving any indication that you have reached any conclusions in your own mind already. Just pull information out of her and not push any over into her during this chat. Maybe she will offer something that will work without you pushing for anything.</font></span><p><font size=1><u><a href="reply?id=3525608&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3525812 href="vote?for=3525812&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3525812></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=sgallant">sgallant</a> 7 days ago  | <a href="item?id=3525812">link</a></span></div><br>
<span class="comment"><font color=#000000>That's great advice, thanks.</font></span><p><font size=1><u><a href="reply?id=3525812&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3525822 href="vote?for=3525822&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3525822></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=sgallant">sgallant</a> 7 days ago  | <a href="item?id=3525822">link</a></span></div><br>
<span class="comment"><font color=#000000>#5 is a very good point (although, I'm convinced that we won't fail). You're right, in that, these relationships are very hard to find.</font></span><p><font size=1><u><a href="reply?id=3525822&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3526550 href="vote?for=3526550&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3526550></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 6 days ago  | <a href="item?id=3526550">link</a></span></div><br>
<span class="comment"><font color=#000000>Everybody is convinced that they won't fail. You should absolutely be planning as if you will; being able to do that may be one of the differences between people who succeed in startups and those who fail, since most of the failures never get up and try again.</font></span><p><font size=1><u><a href="reply?id=3526550&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3522824 href="vote?for=3522824&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3522824></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3522824">link</a> | <a href="item?id=3521903">parent</a> | on: <a href="item?id=3521903">Salary Negotiations, Don’t be Tough, be Honest</a></span></div><br>
<span class="comment"><font color=#000000>A worrisome mentality in the post and in some comments here: the words "should" and "shouldn't", the concept of "fair", "feeling sorry" for people who have to negotiate, the word "ridiculous".<p>I think you should be careful with sentiment analysis on a forum like HN. This place is overwhelmingly populated with people for whom the concept of salary negotiation is repellant. One could get a seriously skewed idea of what to expect from negotiations from comments on HN.<p>The fact is, a huge number of places <i>that you'd actually want to work at</i> are going to treat salary negotiation as the business transaction that it is. Not taking the transaction seriously is going to cost you thousands and thousands of dollars.<p>It's true: the worst places to work will be the ones who are most aggressive about negotiation. But that observation <i>totally misses Patrick's point</i>. You don't have to get screwed by a hard-nosed negotiation to lose out on thousands of dollars of comp. In fact, if you don't take negotiation seriously, you'll lose thousands of dollars without even noticing, because your social norms will blind you to what's happening. Patrick isn't just talking about how to handle stupidly tough negotiations. He's talking about <i>all</i> of them, even the nice and friendly ones.<p>The range between your negotiating floor and the employer's negotiating ceiling is the spread. Any dollar figure you accept below their ceiling is a dollar you gave them. From the way people talk about negotiation on HN, my guess is that 9 times out of 10, HN'ers take a number smack in the middle of the spread --- meaning, they've coughed up high 4 digits (and often 5) back to their employer. And they feel good about it! They write blog posts about it!<p>If you think you work on a team where you don't have to negotiate, because everyone's grown-up and knows the score and pays people what they're worth, seriously consider that you may (probably not intentionally, but still) be getting played.</font></span><p><font size=1><u><a href="reply?id=3522824&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3523328 href="vote?for=3523328&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523328></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=nostrademons">nostrademons</a> 8 days ago  | <a href="item?id=3523328">link</a></span></div><br>
<span class="comment"><font color=#000000>"It's true: the worst places to work will be the ones who are most aggressive about negotiation."<p>I'm not sure that's true.  Google is a notoriously tough negotiator - not just for salaries, but for their food suppliers, data center locations, acquisitions, basically everything - but it's also a pretty good place to work.  I've heard Warren Buffett and the Berkshire Hathaway properties are too.<p>The best people to do business with seem to treat negotiation as a business transaction that they will press every advantage they have on, but then once you're in, you're in, and they'll be loyal to you.  And they expect you to do the same.  It seems to be worth cultivating that skill - respecting the other party, but also respecting <i>yourself</i> enough to ask for what you want and be willing to walk if you can't get it.<p>Come to think of it, this is generally called "assertiveness" and is typically seen as a desirable quality in life.</font></span><p><font size=1><u><a href="reply?id=3523328&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3525355 href="vote?for=3525355&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3525355></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=dpritchett">dpritchett</a> 7 days ago  | <a href="item?id=3525355">link</a></span></div><br>
<span class="comment"><font color=#000000>You'll still need to renegotiate regularly since the value of the relationship drifts over time.  Are you still worth exactly what you were on the day you started your current gig?</font></span><p><font size=1><u><a href="reply?id=3525355&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3523124 href="vote?for=3523124&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523124></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=badclient">badclient</a> 8 days ago  | <a href="item?id=3523124">link</a></span></div><br>
<span class="comment"><font color=#000000>You've probably answered it elsewhere but I'd be interested in your take on whether I, the candidate, should state a number when asked.</font></span><p><font size=1><u><a href="reply?id=3523124&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3523160 href="vote?for=3523160&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523160></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3523160">link</a></span></div><br>
<span class="comment"><font color=#000000>Everyone will ask for your current salary (it genuinely simplifies job interviews), but don't supply it; disclosing your current salary begs for an offer of that + 5-10%.<p>As for naming any number first, meh? If you give a number first, you'll be negotiating your salary <i>down</i> from it; if the employer names a number first, you'll be negotiating <i>up</i> from that. You might prefer the theoretically unlimited upside of the latter. On the other hand, loss aversion is more powerful than gain seeking, making downward concessions harder won.</font></span><p><font size=1><u><a href="reply?id=3523160&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3523238 href="vote?for=3523238&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523238></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=badclient">badclient</a> 8 days ago  | <a href="item?id=3523238">link</a></span></div><br>
<span class="comment"><font color=#000000>You don't find that when trying to negotiate up, you can't go beyond 10-25%?</font></span><p><font size=1><u><a href="reply?id=3523238&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=160></td><td valign=top><center><a id=up_3523260 href="vote?for=3523260&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523260></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3523260">link</a></span></div><br>
<span class="comment"><font color=#000000>I don't have a strong preference between the two (I might be wrong not to).<p>Of course, that assumes both parties in the negotiation are rational and sophisticated. A <i>typical</i> developer is brilliant at designing software, absolutely terrible at understanding markets, and devastatingly introverted, and so is likely to lowball themselves. You will very rarely do much better than the first number <i>you</i> give. If you think you're not up to the challenge, putting the first number on the table may be a bad move. It depends.<p>What doesn't depend is your current salary. Everyone is going to ask for it. There's nothing wrong with asking. But don't cough it up.</font></span><p><font size=1><u><a href="reply?id=3523260&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=200></td><td valign=top><center><a id=up_3523652 href="vote?for=3523652&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523652></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=calibraxis">calibraxis</a> 7 days ago  | <a href="item?id=3523652">link</a></span></div><br>
<span class="comment"><font color=#000000>"My current salary? Then out of curiosity, what do you currently pay your developers?"<p>I've never answered that, but that should be entertainingly confusing, if you're not in any particular need of the job and have a strong bargaining position. (Or if they're really cool people.)</font></span><p><font size=1><u><a href="reply?id=3523652&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=160></td><td valign=top><center><a id=up_3523296 href="vote?for=3523296&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523296></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=xenophanes">xenophanes</a> 8 days ago  | <a href="item?id=3523296">link</a></span></div><br>
<span class="comment"><font color=#000000>Doesn't it depend how you handle it?<p>If they say 80k and then you say, casually, "Oh, really? I was thinking more like 175k." then I don't think you're going to be stuck at a 10-25% upward mobility.<p>You might blow the negotiation, but you aren't stuck at 80k+25% max. And you shouldn't be worried about blowing negotiation. If 125k would work for both of you, it's still possible after this start. If they are rational, and you are rational, there is no reason you can't proceed to figure that out.<p>Since you can always do something like this to totally ignore/invalidate/reject their first number, I don't think letting them give the first number is dangerous.<p>But if they say 80k and then you say "let's add 5k because reason X, and 5k because reason Y" and then after that you try to get another 5k for reason Z, repeat, then yeah you're going to have a hard time getting very far away from the 80k initial number.<p>Meanwhile if you say the first number and give 175k, then if they are terrible at negotiating they might not be able to lower it more than 10-25%, but don't count on that.<p>How many people are competent at negotiating and able to rejecting initial frames when appropriate I'm not sure. If you are terrible at negotiating, or you think the other guys might be bad at it, then in both cases I guess saying the first number is safer. But be warned: if you say a high number and they suck at negotiating too much, they might just not hire you. Sometimes there is a number you can agree on but they ask you to come down to a number above their max and then even though you say "sure" they still have to come up with a reason to cancel the deal. This is dumb, but it happens.</font></span><p><font size=1><u><a href="reply?id=3523296&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3522789 href="vote?for=3522789&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3522789></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3522789">link</a> | <a href="item?id=3522014">parent</a> | on: <a href="item?id=3522014">Is it OK to steal “Downton Abbey”?</a></span></div><br>
<span class="comment"><font color=#000000>I pirated Downton.<p>I pay for BBCA; moreover, when stuff is available on iTMS I buy, even when I buy the premium cable channel it runs on, even when it's available on VOD, even (for instance, with The Sopranos) when I own much of the physical DVD media for it! I've spent many many hundreds of dollars on iTMS for content that I already had legitimate paid-for access to.<p>This is of course rationalization; the BBC is entitled to monetize their content however they see fit. That's capitalism. I rely on congruent norms, contracts, &#38;c to make my living, and so do you --- even if you don't sell your own software directly, your wages are effectively subsidized by the defensibility of IP; we are all of us in the business of selling content for (on the face of it) unjustifiable premiums.<p>But whatever, I'm human. This is perhaps a good reason for media companies to stop doing region encoding and staggered releases and such; it socializes people to piracy. If you've even got me torrenting stuff, you're probably doing something very wrong.</font></span><p><font size=1><u><a href="reply?id=3522789&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3522963 href="vote?for=3522963&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3522963></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=dminor">dminor</a> 8 days ago  | <a href="item?id=3522963">link</a></span></div><br>
<span class="comment"><font color=#000000>&#62; If you've even got me torrenting stuff, you're probably doing something very wrong.<p>I never pirate and even I was sorely tempted. They've managed to produce a hit show that people are excited about, but then expect people to ignore that excitement and delay gratification for months. I feel like I'm one of those kids in the marshmallow experiment.</font></span><p><font size=1><u><a href="reply?id=3522963&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3523026 href="vote?for=3523026&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523026></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=girlvinyl">girlvinyl</a> 8 days ago  | <a href="item?id=3523026">link</a></span></div><br>
<span class="comment"><font color=#000000>Sorry to be terribly pedantic, but the BBC does not run or produce Downton Abbey. Downton Abbey airs on iTV in the UK.</font></span><p><font size=1><u><a href="reply?id=3523026&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3523040 href="vote?for=3523040&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523040></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3523040">link</a></span></div><br>
<span class="comment"><font color=#000000>That's not pedantic at all; it undercuts part of my rationale for pirating it!</font></span><p><font size=1><u><a href="reply?id=3523040&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3522995 href="vote?for=3522995&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3522995></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=soneil">soneil</a> 8 days ago  | <a href="item?id=3522995">link</a></span></div><br>
<span class="comment"><font color=#000000>I'm in pretty much the same position.  I pay for cable, and extra for their DVR. I pay for netflix.  I pay for the BBC's international variant of iplayer, even if it is device-specific.<p>Every chance they've given me, I've paid.  And I still end up 'stealing' content because geolocked business models don't work anymore.  If they can't adapt to us, we'll have to adapt to them.</font></span><p><font size=1><u><a href="reply?id=3522995&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3520651 href="vote?for=3520651&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520651></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3520651">link</a> | <a href="item?id=3520275">parent</a> | on: <a href="item?id=3520275">Chapter 6 of the Rails Tutorial, 2nd Edition is ou...</a></span></div><br>
<span class="comment"><font color=#000000>I know i'm harping here, Michael, but:<p><i>Another step that isn’t strictly necessary at this stage—but is a really good idea nevertheless—is to tell Rails which attributes of the model are accessible, i.e., which attributes can be modified by outside users (such as users submitting requests with web browsers).</i><p>That's not what attr_accessible means --- the real meaning of attr_accessible is subtly different in a way that leads people to make mistakes. attr_accessible means attributes can be modified <i>automatically</i> based on user input. End-user web browser requests <i>can</i> modify things that aren't in attr_accessible --- you just have to write the code to let them.<p>The error this leads to is overly-permissive attr_accessible statements, because people fall into a trap of believing anything that might be changed as a direct result of a user request must be in the attr_accessible statement.</font></span><p><font size=1><u><a href="reply?id=3520651&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3520757 href="vote?for=3520757&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520757></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=mhartl">mhartl</a> 8 days ago  | <a href="item?id=3520757">link</a></span></div><br>
<span class="comment"><font color=#000000>If this is 'harping', please keep doing it. Mass assignment/attr_accessible is an important and oft-neglected issue, and I appreciate your taking the time to help. I agree that readers could get the wrong idea by thinking they're better-protected than they really are. I've clarified the wording by adding "automatically" as a modifier:<p><i>i.e., which attributes can be modified automatically by outside users</i><p>The detailed meaning is then deferred to later in the tutorial, when the effects of attr_accessible are illustrated with concrete examples of mass assignment.</font></span><p><font size=1><u><a href="reply?id=3520757&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3521956 href="vote?for=3521956&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3521956></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=dawgr">dawgr</a> 8 days ago  | <a href="item?id=3521956">link</a></span></div><br>
<span class="comment"><font color=#5a5a5a>Could you please include a small section that talks about how to integrate rails and backbone?</font></span><p><font size=1><u><a href="reply?id=3521956&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3523360 href="vote?for=3523360&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3523360></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=mhartl">mhartl</a> 8 days ago  | <a href="item?id=3523360">link</a></span></div><br>
<span class="comment"><font color=#000000>I don't have any plans to make this part of the core tutorial, but it might be a good topic for a future standalone product.</font></span><p><font size=1><u><a href="reply?id=3523360&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3520763 href="vote?for=3520763&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520763></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=snprbob86">snprbob86</a> 8 days ago  | <a href="item?id=3520763">link</a></span></div><br>
<span class="comment"><font color=#000000>`attr_accessible` and friends are a nightmare anyway. They push a controller-layer concern into the model-layer. It breaks the hash-initialization syntax that is so useful in irb, in unit tests, in background jobs, etc.<p>Instead, I've been using ActiveSupport's Hash#slice method in my controllers.</font></span><p><font size=1><u><a href="reply?id=3520763&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3520879 href="vote?for=3520879&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520879></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3520879">link</a></span></div><br>
<span class="comment"><font color=#000000>Declarative syntax for which attributes the model designer is comfortable exposing to mass assignment seems like a perfectly legitimate model concern. In what sense is attr_accessible different from, say, "validate"?</font></span><p><font size=1><u><a href="reply?id=3520879&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3520967 href="vote?for=3520967&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520967></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=snprbob86">snprbob86</a> 8 days ago  | <a href="item?id=3520967">link</a></span></div><br>
<span class="comment"><font color=#000000>It mascarades and is documented as a security feature, but it's a superficial restriction. You could simply loop and send("#{key}=", value) instead of calling attributes=(hash).<p>In practice, all it does it prevent you from writing `MyModel.new(:foo =&#62; bar)` and force you to write `m = MyModel.new; m.foo = bar` This is simply annoying at the repl.<p>Validation applies always the same (or when some predicates are satisfied), but restriction on changing fields can vary by view or via permissions (ie. only admins can flip that bit!)<p>The security concern comes up when you bring "params" into the picture. You don't want to ever do: MyModel.new(params) for fear of params[:is_admin] == true.<p>A better solution would be to automatically mark the values in `params` as tainted and throw an error on mass-assignment of tainted values. This way you can still use mass assignment for non-user-input (like in tests or at the repl). You could have an `safe_attrs` to disable tainted value filtering for some known-safe attributes.</font></span><p><font size=1><u><a href="reply?id=3520967&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=160></td><td valign=top><center><a id=up_3521074 href="vote?for=3521074&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3521074></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3521074">link</a></span></div><br>
<span class="comment"><font color=#000000>I see where you're coming from. In the past 10 years, I've learned to appreciate things that, while not solving fundamentally a specific security problem, act as a circuit breaker to keep people from mindlessly making the exact same mistake over and over again.<p>AR::Base#update_attributes is a bad interface, from a security perspective. But it's vital to the programmer experience of Rails development. There's no good fix for the problem; AR models don't even <i>list</i> their attributes, let alone express a coherent strategy for defending them. I'll take the little wins I can get.</font></span><p><font size=1><u><a href="reply?id=3521074&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3522045 href="vote?for=3522045&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3522045></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=sc00ter">sc00ter</a> 8 days ago  | <a href="item?id=3522045">link</a></span></div><br>
<span class="comment"><font color=#000000>"Mass assignment security is a feature that is aimed at dealing with form input. By placing it in the model, we end up making the implicit assumption that all ‘normal’ interaction with the model happens via a HTTP request. This assumption is incorrect and causes problems."<p><a href="http://jonathanleighton.com/articles/2011/mass-assignment-security-shouldnt-happen-in-the-model/" rel="nofollow">http://jonathanleighton.com/articles/2011/mass-assignment-se...</a></font></span><p><font size=1><u><a href="reply?id=3522045&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3520966 href="vote?for=3520966&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520966></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=danneu">danneu</a> 8 days ago  | <a href="item?id=3520966">link</a></span></div><br>
<span class="comment"><font color=#000000>You can still use attr_accessible in the controller-layer.<p><pre><code>    class AccountsController &#60; ApplicationController
      include ActiveModel::MassAssignmentSecurity

      attr_accessible :first_name, :last_name
      ...
</code></pre>
<a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html" rel="nofollow">http://api.rubyonrails.org/classes/ActiveModel/MassAssignmen...</a> explicitly states: <i>Note that using Hash#except or Hash#slice in place of attr_accessible to sanitize attributes won’t provide sufficient protection.</i><p>I agree with you, though. Model-level attr_accessible, if nothing else, is flatly annoying. I feel inconvenienced by a measure that's supposed to protect against malicious users. And I feel like the terrorists have already won. I'm no MVC guru, but it makes sense to me that the Controller would deal with what amounts to the params that are on their way to the model. Why should the model have to worry about mass assignment?</font></span><p><font size=1><u><a href="reply?id=3520966&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3521069 href="vote?for=3521069&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3521069></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=snprbob86">snprbob86</a> 8 days ago  | <a href="item?id=3521069">link</a></span></div><br>
<span class="comment"><font color=#000000>`except` is a bad idea because it's a black-list, but what's wrong with using `slice` as a white-list?<p>(Anyway, I just grepped our code and there is only ONE usage of slice in a controller anyway, the rest are explicit, non-mass assignments)</font></span><p><font size=1><u><a href="reply?id=3521069&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3519661 href="vote?for=3519661&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3519661></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 9 days ago  | <a href="item?id=3519661">link</a> | <a href="item?id=3518059">parent</a> | on: <a href="item?id=3518059">How I Learned Enough Ruby On Rails In 12 Weeks To ...</a></span></div><br>
<span class="comment"><font color=#000000>Congrats on the launch. I think I speak for everyone on HN when I say, you're going about this the right way: learn enough to build applications for yourself, whether or not you're going to be a code committer over the long term.<p>Can I give you some quick advice? Don't take this the wrong way: Rails makes it easy to learn enough to be dangerous in 12 weeks. Some quick hits on obvious things you should look over in your application to ensure it isn't overtly insecure:<p>* Every model class should have an "attr_accessible" statement, and the attributes you expose through it should be minimal. A very common misconception: "the things in attr_accessible are the only attributes users can set". Not so! The things in attr_accessible are the only attributes users can set <i>automatically, through mass assignment</i>. You can expose things that aren't in attr_accessible by manually settings them with assignment statements. Assume anything that's in an "attr_accessible" list, and <i>every</i> attribute of a model without attr_accessible, can and will be set to the most hostile possible value, like "role=admin".<p>* Rails programming intros have a bad habit of introducing ActiveRecord finders in the context of the model class object --- in other words, "Post.find(params[:id])". This is exactly the wrong way to do it; it's so bad that you can literally generate a list of vulnerabilities on Rails projects by grepping app/controllers for "[A-Z][a-z]+]\.find". Instead, make sure all your finders work via associations, like "@current_user.posts.find(params[:id])".<p>* Use a popular plugin for file uploads. Rails doesn't do much of anything to defend against file upload/download vulnerabilities. If I was building a public-facing Rails application, I'd do whatever I could to keep the filesystem namespace out of my requests --- storing all files on Amazon S3 without explicitly storing them in temp files is a good way to do this.<p>* Don't enable the old-style wildcard route ("/:controller/:action/:id) or any of its variants ("/posts/:action/:id :controller =&#62; :posts); whether you declare methods "public" or "private" in a controller should have nothing to do with whether they're exposed to attackers.<p>* Have a "PreauthController" that inherits from "ApplicationController" and <i>disables</i> the is-logged-in check; in other words, every controller, particularly every controller generated by "rails generate", should be post-authentication <i>by default</i>. Set up the before_filter that checks for a valid user session right there in ApplicationController, then "turn it off" for the LoginController by having it inherit from PreauthController. 
Similarly: if you can get away with not having an AdminController at all --- run a totally separate Rails app for admin that requires a VPN to get to --- do that; otherwise, have an abstract AdminOnlyController class with no methods in it that does nothing but set up a before_filter to check for admin privileges, and have every admin-only controller inherit from it.<p>* Pretend the backtic operator (the one that executes Unix commands) doesn't exist.<p>You may do all of these things already (in which case, good for you! you learned more in 12 weeks than a lot of Rails developers do in years). I just called them out because (a) not doing them will be tremendously painful down the road (individual XSS slipups are annoying but unlikely to kill you, but vulnerabilities that allow people to dump your whole database are something else) and (b) they are so easy to fix.<p>Good luck!</font></span><p><font size=1><u><a href="reply?id=3519661&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3520159 href="vote?for=3520159&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520159></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=mhartl">mhartl</a> 9 days ago  | <a href="item?id=3520159">link</a></span></div><br>
<span class="comment"><font color=#000000>Teaching good security practices was one goal of the <i>Ruby on Rails Tutorial</i> (a resource mentioned in the OP). It uses attr_accessible for <i>every</i> model and uses find-through-association (emphasizing the security implications of both), and it most assuredly does <i>not</i> use the /:controller/:action/:id pattern or backticks. It punts image upload over to Gravatar, and recommends Paperclip for those who need custom uploads.<p>Having a PreauthController definitely sounds like a good idea, but it might be a bit obscure for beginning developers. I'll consider it for inclusion as an exercise in one of the chapters covering authorization, or maybe I'll include it in more advanced <i>Rails Tutorial</i> material down the road. Thanks for the tip.</font></span><p><font size=1><u><a href="reply?id=3520159&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3520239 href="vote?for=3520239&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520239></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 9 days ago  | <a href="item?id=3520239">link</a></span></div><br>
<span class="comment"><font color=#000000>All I can say is, I looked under the hood at the application we're talking about and thought these might be useful suggestions. Particularly attr_accessible.<p>I've found a lot of Rails apps over the last couple years that were diligent about <i>having</i> an attr_accessible in every model, but not diligent about what went in the attr_accessible. Following the Rails idiom, they were doing all their attribute assignment through update-style params[:model] model[foo] model[bar] stuff, and attr_accessible "breaks" that.<p>The Rails tutorial is good (and ambitious) --- just know, this stuff trips up solid, experienced Rails developers all the time.</font></span><p><font size=1><u><a href="reply?id=3520239&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3520375 href="vote?for=3520375&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520375></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=danneu">danneu</a> 9 days ago  | <a href="item?id=3520375">link</a></span></div><br>
<span class="comment"><font color=#000000>When I was starting out, every tutorial seemed to assume that I even knew what "mass assignment" implied. Creating a bunch of bad things at once? Changing a lot of existing things in a bad way at once like their creator_id so a bad guy could access them?<p>I think "mass assignment" and "attr_accessible" in tutorials should always link to the API documentation[1] that explains the implications and the tools at your disposal + example code.<p>[1]: <a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html" rel="nofollow">http://api.rubyonrails.org/classes/ActiveModel/MassAssignmen...</a></font></span><p><font size=1><u><a href="reply?id=3520375&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=160></td><td valign=top><center><a id=up_3521910 href="vote?for=3521910&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3521910></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=sc00ter">sc00ter</a> 8 days ago  | <a href="item?id=3521910">link</a></span></div><br>
<span class="comment"><font color=#000000>Worse still, I started off with <i>Beginning Rails 3</i> by Apress, and it makes only one obscure reference to attr_accessible, and not in the context of security, doesn't mention mass assignment at all, and has no chapter on even basic security. Beginners need to learn this stuff early, so Apress' oversight is unforgivable. mhartl OTOH is to be applauded.</font></span><p><font size=1><u><a href="reply?id=3521910&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3522479 href="vote?for=3522479&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3522479></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=cantbecool">cantbecool</a> 8 days ago  | <a href="item?id=3522479">link</a></span></div><br>
<span class="comment"><font color=#000000>I remember reading you post regarding mass assignment a few years back. Great little read.<p><a href="http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html" rel="nofollow">http://api.rubyonrails.org/classes/ActiveModel/MassAssignmen...</a></font></span><p><font size=1><u><a href="reply?id=3522479&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3520154 href="vote?for=3520154&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520154></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=joeag">joeag</a> 9 days ago  | <a href="item?id=3520154">link</a></span></div><br>
<span class="comment"><font color=#000000>Those are awesome pointers - there should be a tool that you could upload all your applications files to, the tool would scan all the files for these errors and return a report on vulnerabilities found and instructions on correcting. Maybe this already exists? I am a beginner programmer as well, making my way through Rails Tutorial (chapter 10) and Learn Ruby the Hard Way (exercise 35) and Codecademy Code year.</font></span><p><font size=1><u><a href="reply?id=3520154&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3519940 href="vote?for=3519940&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3519940></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=patrickod">patrickod</a> 9 days ago  | <a href="item?id=3519940">link</a></span></div><br>
<span class="comment"><font color=#000000>You seem to have a good bit of experience securing rails apps. Are there lessons hard learnt?</font></span><p><font size=1><u><a href="reply?id=3519940&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3521558 href="vote?for=3521558&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3521558></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=charliesome">charliesome</a> 8 days ago  | <a href="item?id=3521558">link</a></span></div><br>
<span class="comment"><font color=#000000>No, it's all just common sense really.</font></span><p><font size=1><u><a href="reply?id=3521558&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3519734 href="vote?for=3519734&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3519734></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=vertr">vertr</a> 9 days ago  | <a href="item?id=3519734">link</a></span></div><br>
<span class="comment"><font color=#000000>This would make a great blog post. Thanks for the info.</font></span><p><font size=1><u><a href="reply?id=3519734&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3520440 href="vote?for=3520440&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520440></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=james-fend">james-fend</a> 9 days ago  | <a href="item?id=3520440">link</a></span></div><br>
<span class="comment"><font color=#000000>Thank you for this. I will have to look into a few off that list and implement them. All the models does have attr_accessible. Using CarrierWave for uploads.</font></span><p><font size=1><u><a href="reply?id=3520440&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3520600 href="vote?for=3520600&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3520600></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 8 days ago  | <a href="item?id=3520600">link</a></span></div><br>
<span class="comment"><font color=#000000>I think it might be worth your time to double check your attr_accessibles. Just:<p><pre><code>  grep attr_accessible app/models/*rb 
</code></pre>
Everything that comes up on that list, you should be comfortable with users giving <i>any</i> value they want to; that's what attr_accessible (effectively, not literally) means: "I give up any control of how these attributes will be set".</font></span><p><font size=1><u><a href="reply?id=3520600&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3521099 href="vote?for=3521099&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3521099></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=james-fend">james-fend</a> 8 days ago  | <a href="item?id=3521099">link</a></span></div><br>
<span class="comment"><font color=#000000>Thank you for that. I shot you an email..</font></span><p><font size=1><u><a href="reply?id=3521099&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3512467 href="vote?for=3512467&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512467></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 10 days ago  | <a href="item?id=3512467">link</a> | <a href="item?id=3510308">parent</a> | on: <a href="item?id=3509496">Watching Apple win</a></span></div><br>
<span class="comment"><font color=#000000>Facile. The Microsoft of the '90s was famous for spending on software quality. They didn't have the design mojo of Apple or Adobe, but still produced extraordinarily well designed software that caught on because of its intrinsic value and not just marketing --- Excel and Word, for instance, were simply good pieces of software.<p>I suspect any narrative that looks at Microsoft as the reason the '90s didn't look like Steve Job's aught's has rose-colored glasses on about the "quality" of (pick any:) Linux desktop software, Nullsoft, Netscape Navigator, NCSA HTTPD, Eudora, Forte FreeAgent.<p>I think the reality has more to do with technology progressing to a point where it's cost effective to build products with high production values --- handheld computers with a BOM in the low hundreds of dollars can do hardware-accelerated OpenGL compositing for a vector-based GUI.<p>That doesn't mean Apple didn't do something to carry the industry forward; they did: they noticed the coming new reality first, and did the best job of capitalizing on it by designing new kinds of products that executed a few core features better than anything could have in the '90s, and so didn't need to crud themselves up with 1,000 extra features to make up for deficits in their core.</font></span><p><font size=1><u><a href="reply?id=3512467&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3518216 href="vote?for=3518216&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3518216></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=code_duck">code_duck</a> 9 days ago  | <a href="item?id=3518216">link</a></span></div><br>
<span class="comment"><font color=#000000>Do you recall using non-microsoft software from the same period? I don't mean the university software like Mosaic. I had an Amiga, and there is very little that seems well designed to me about Windows 3.1 or Windows 95 compared to AmigaDOS 2.0.<p>They may have spent large sums on well designed software, but as far as I can tell this did not have the intended effect.<p>I owned a DOS machine in the late 80s. The interface was tragically poor, compared to just about anything else available. Stability was poor as well. 10 years later, I bought a Windows 98 machine, thinking 'oh surely Microsoft has worked this out!'. Alas, it featured a rather limited, poorly thought out interface and had all the stability of an inflatable boat on the high seas. This is to what I refer.</font></span><p><font size=1><u><a href="reply?id=3518216&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3511251 href="vote?for=3511251&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511251></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511251">link</a> | <a href="item?id=3510979">parent</a> | on: <a href="item?id=3509710">Serious Flaw Emerges In Quantum Cryptography</a></span></div><br>
<span class="comment"><font color=#000000>An encrypted SHA1 hash isn't a MAC. The protocol you outlined would be trivially breakable. You seem pretty smart; give it a few minutes thought and see if you can grok why.</font></span><p><font size=1><u><a href="reply?id=3511251&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3511694 href="vote?for=3511694&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511694></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 11 days ago  | <a href="item?id=3511694">link</a></span></div><br>
<span class="comment"><font color=#000000>If it's trivially breakable, it should be trivial for you to explain how.<p>Magic token, protocol identifier<p>Location in key to use<p>Length of message + salt<p>MESSAGE - XORed against OTP<p>Some salt is taken from the next bit of OTP.<p>Hash of plaintext message<p>If any of that portion of the OTP has been previously used, the message is invalid.  If the hash doesn't match, the message is invalid.  Under no circumstances is a new message valid if it uses a portion of the OTP that has been used before.<p>I can't guarantee a message will arrive.  I believe I am correct in thinking that all messages that arrive and pass these tests, have not been tampered with.  If the keys are physically secure, the message is secure.</font></span><p><font size=1><u><a href="reply?id=3511694&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3511798 href="vote?for=3511798&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511798></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511798">link</a></span></div><br>
<span class="comment"><font color=#000000>If you found this protocol being used in an application you were testing, how would you go about tinkering with it to find attacks?<p>I'm serious, not messing with you. What would be some things you would try to do to get the protocol to misbehave?</font></span><p><font size=1><u><a href="reply?id=3511798&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3512107 href="vote?for=3512107&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512107></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 10 days ago  | <a href="item?id=3512107">link</a></span></div><br>
<span class="comment"><font color=#000000>If I intercepted the message...<p>I would try to change the location in the key to use.  Especially to one that had already been used.<p>I would try to replace the message, salt, and hash entirely.<p>I would try to fiddle bits.<p>I would compile all of the messages, looking for when the pad had been re-used.<p>I would try to decipher messages, I would try to corrupt messages, I would try to inject my own messages, I would try  to use a denial-of-service to prevent you from communicating at all, I would try to force you to consume your entire key to transmit your first message.  I would re-transmit old messages, and see how you behaved.  I would send cleartext messages telling you that the sender had been abducted, and that you couldn't trust any further messages, sending it as a "trusted associate," or sister, or parent.  I would try to gain physical access to the hard drive, and copy it.  Having gained access, I could inject all of my own messages, and deny you the ability to communicate at all.<p>I really, honestly, don't think that my proposed system is any more or less secure than any communication system that would rely upon quantum entanglement to deliver a supposedly secure keystream to both ends.<p>But it would cost many orders of magnitude less.</font></span><p><font size=1><u><a href="reply?id=3512107&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=160></td><td valign=top><center><a id=up_3512139 href="vote?for=3512139&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512139></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 10 days ago  | <a href="item?id=3512139">link</a></span></div><br>
<span class="comment"><font color=#000000>I wouldn't use QC. I'd use conventional encryption.<p>Think about what happens given any known plaintext.<p>Think about the difference between a MAC and a simple encrypted hash.<p>I'm not giving you random political scenarios or whatnot; I'm looking at this like a simple engineering problem; the benchmark is TLS, not "some theoretical thing that the NSA can't break" or whatever.<p>I shouldn't have made fun of you to begin with (making fun of people who suggest one time pads is a time-honored sci.crypt tradition that doesn't need propagating). So bear with me. I'm just trying to show you how irritating it is to get a simple encrypted transport right.</font></span><p><font size=1><u><a href="reply?id=3512139&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=200></td><td valign=top><center><a id=up_3512212 href="vote?for=3512212&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512212></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 10 days ago  | <a href="item?id=3512212">link</a></span></div><br>
<span class="comment"><font color=#000000>If you know any plaintext, then you know the OTP that corresponds to that one section of the key, and you know the salt that was used for that one hash.<p>Since I will never use, or accept, that portion of the OTP again, this doesn't gain you the ability to decypher a message, or fake a message without detection.<p>If you both know the plain text, and you have prevented transmission of my original message, then you have that many bytes of OTP that you could use to send that many bytes of faked messages.<p>If there is another cryptography system you would like to use to encrypt the plaintext, before sending it through my proposed system, then knowing just the plaintext would not help you.<p>Making fun of people who THINK they're using OTP is the time-honored tradition.<p>I'm proposing to ACTUALLY use OTP.  I acknowledge that someone who intercepts all of our messages can prohibit us from communicating.  But they can't fake messages.  I acknowledge that if someone steals our key, we are compromised - but that is true of any system.<p>I acknowledge that transport is hard.<p>You do not accept QC.  Okay, I'm not going to win you over.<p>If you accept QC, then I offer up that physical transport of a OTP is just as secure, and orders of magnitude cheaper.<p>Whatever MAC / transport systems have been used for QC, can be used by my proposed system.  I am no better, or worse, than they are.</font></span><p><font size=1><u><a href="reply?id=3512212&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=240></td><td valign=top><center><a id=up_3512410 href="vote?for=3512410&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512410></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 10 days ago  | <a href="item?id=3512410">link</a></span></div><br>
<span class="comment"><font color=#000000>No, using an OTP isn't actually better. The problems I'm talking about don't depend on keystream reuse; they depend on the fact that you don't have "keys", you have a single keystream.<p>A real, sound cryptosystem would use keys in at least two places in the protocol (once to provide confidentiality for the message, and once to provide integrity).</font></span><p><font size=1><u><a href="reply?id=3512410&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=280></td><td valign=top><center><a id=up_3512452 href="vote?for=3512452&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512452></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 10 days ago  | <a href="item?id=3512452">link</a></span></div><br>
<span class="comment"><font color=#000000>I use the OTP to encrypt the message.  I use the OTP as salt for a hash to verify.<p>Confidentiality, and integrity.</font></span><p><font size=1><u><a href="reply?id=3512452&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=320></td><td valign=top><center><a id=up_3512554 href="vote?for=3512554&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512554></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 10 days ago  | <a href="item?id=3512554">link</a></span></div><br>
<span class="comment"><font color=#000000>Or it would be if "simply concatenating a keystream with a secure hash function" created a secure MAC, which it doesn't.<p>You see what I mean about "yes-but"-ing ones way into treacherous confidence. Believe me when I say that a lot of systems have been deployed using this same design process, and all of them failed --- it is hard to name a <i>well-designed</i> cryptosystem that didn't succumb to spectacular failures.<p>And, on another tangent, you can see how your design now begs a pretty big question: between AES and SHA-256, virtually everyone would agree that SHA-256 is the less sound primitive (they're both "sound", but SHA-2 will fall before AES, which is why we're busily selecting SHA-3 right now).<p>Concern about AES drives you to contemplate OTPs, but forces you to rely on something like SHA-2. An AES design could use AES both for confidentiality and integrity. Either way, you're not getting "perfect" security; you have all the downsides of OTPs and none of the upside.<p>OTP's are kind of silly.</font></span><p><font size=1><u><a href="reply?id=3512554&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=360></td><td valign=top><center><a id=up_3512624 href="vote?for=3512624&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512624></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 10 days ago  | <a href="item?id=3512624">link</a></span></div><br>
<span class="comment"><font color=#000000>Thank you for all of your responses.<p>Unfortunately, all you've done is tell me "it won't work."<p>When you attempt to inform me why it won't work, your answers boil down to "because."<p>Why doesn't concatenating "MESSAGE XOR OTP" with "HASH(OTP-SALT, MESSAGE)" both a) provide confidentiality for the message, and B) provide integrity?<p>It certainly provides confidentially for the message.  Without knowing the OTP I use, you will not decipher the message.<p>And by using another portion of the OTP as a unique, one-time salt for a hashing function (I don't care which hashing function), I am preventing a man in the middle from twiddling bits undetected.<p>If you want to tell me that I'm wrong - that's great.  If you want to explain why I'm wrong, that would actually be useful.<p>...and Quantum Cryptography boils down to being a fancy way to generate a OTP.  Your argument then becomes, "All of the researchers working on Quantum Cryptography are idiots, and they should know better."  Extraordinary claims require extraordinary proof.  If your claim is that they can't build a physically secure system, because you can't trust a quantum-entagled particle pair to really arrive at both ends uncorrupted, that's one thing.  No, your claim is that the underlying math behind OTP is inherently flawed.  Message XOR OTP is not secure, even if the man in the middle does not know the OTP.<p>From the definition on Wikipedia, "A MAC algorithm, sometimes called a keyed (cryptographic) hash function, accepts as input a secret key and an arbitrary-length message to be authenticated, and outputs a MAC (sometimes known as a tag). The MAC value protects both a message's data integrity as well as its authenticity, by allowing verifiers (who also possess the secret key) to detect any changes to the message content."<p>The secret key is a sequence of bytes from my OTP.  They have never been used before, and they will never be used again.<p>"While MAC functions are similar to cryptographic hash functions, they possess different security requirements. To be considered secure, a MAC function must resist existential forgery under chosen-plaintext attacks. This means that even if an attacker has access to an oracle which possesses the secret key and generates MACs for messages of the attacker's choosing, the attacker cannot guess the MAC for other messages without performing infeasible amounts of computation."<p>They cannot guess the MAC for other messages, because they cannot guess the key for other messages, because they do not know the OTP for other messages, because I will never reuse any of my OTP, thus making it a ONE Time Pad.<p>"MACs differ from digital signatures as MAC values are both generated and verified using the same secret key. This implies that the sender and receiver of a message must agree on the same key before initiating communications, as is the case with symmetric encryption."<p>No problem.  That's what my system does.  I tell you what portion of the OTP to use, and you use it.  If it's ever been used before, you know the communication channel has been compromised.<p><a href="http://upload.wikimedia.org/wikipedia/commons/0/08/MAC.svg" rel="nofollow">http://upload.wikimedia.org/wikipedia/commons/0/08/MAC.svg</a><p>The Key (K) is determined by the position in the OTP, specified by the message header.</font></span><p><font size=1><u><a href="reply?id=3512624&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=400></td><td valign=top><center><a id=up_3512972 href="vote?for=3512972&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3512972></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=mindslight">mindslight</a> 10 days ago  | <a href="item?id=3512972">link</a></span></div><br>
<span class="comment"><font color=#000000>1. The general pathology when people focus on 'One Time Pads' is that they're blinded by the 'absolute security' of that one primitive, and don't think about the security properties of everything else. Breaking your hash function allows a plaintext-knowing attacker to rewrite a message, which is considered a break of your entire system. In other words, your system is only as secure as your hash function.<p>2. Since the general security of a system is contingent upon its easiest attack (even if that attack is somehow 'rarer'), you might as well use that same hash function to create a stream cipher and once again avoid the huge OTP. (which is why it won't be taken seriously)<p>3. Security of actual cryptosystems comes from widespread implementation, study, and abuse. While your system may indeed have stronger confidentiality properties, it most likely will have undetected implementation errors due to it not being widely scrutinized.<p>4. I think the meat of your argument is that BKD (backpack key distribution) is comparable to QKD. I do agree that your comparison is appropriate, but think it says more about QKD than BKD. Quantum key distribution still relies on classical algorithms for authenticating the classical channel (some kind of MAC), and today's QKD products even rely on classical block ciphers, as the QKD-produced keys are quite small.<p>5. I see no benefits to QKD in general. It only works between prearranged (and physically connected!) pairs of parties. Reimplementing the Internet with QKD means the links are secure, but ISPs still see everything. If quantum computing really does ruin the RSA and DLOG parties, there's certainly other public key algorithms.</font></span><p><font size=1><u><a href="reply?id=3512972&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=440></td><td valign=top><center><a id=up_3514348 href="vote?for=3514348&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3514348></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 10 days ago  | <a href="item?id=3514348">link</a></span></div><br>
<span class="comment"><font color=#000000>Thanks for the detailed response!<p>That's interesting.  I didn't know that a system was considered broken if, knowing plaintext (and breaking a hash function) allows an attacker to rewrite a message.  Probably pretty basic stuff to you.</font></span><p><font size=1><u><a href="reply?id=3514348&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=480></td><td valign=top><center><a id=up_3515037 href="vote?for=3515037&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3515037></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 10 days ago  | <a href="item?id=3515037">link</a></span></div><br>
<span class="comment"><font color=#000000>Different kinds of attacks often play off each other, so that a small amount of known plaintext allows you to modify the decrypted plaintext of a message in ways that will reveal more plaintext.<p>So, for instance, a CBC padding oracle is an attack that allows you to decrypt messages byte-by-byte --- but it's stopped entirely by a proper MAC on the message.</font></span><p><font size=1><u><a href="reply?id=3515037&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3510922 href="vote?for=3510922&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3510922></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3510922">link</a> | <a href="item?id=3510171">parent</a> | on: <a href="item?id=3509710">Serious Flaw Emerges In Quantum Cryptography</a></span></div><br>
<span class="comment"><font color=#000000>The problem with this is that it is unlikely to be in practical terms better than using two slips of paper to write down a 256 bit random number and using that to establish a long-lived AES-256-CTR session.<p>(This is without getting into the fact that a single keystream is not a secure message exchange protocol, and that conventional cryptography has well-tested ways of linking confidentiality secrets to integrity secrets and of marshalling and canonicalizing messages; I'm just answering your question on its own terms).<p>None of this has much to do with QC, by the way; as I understand it, QC replaces conventional number-theoretic public key crypto, not block and stream ciphers.</font></span><p><font size=1><u><a href="reply?id=3510922&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3511135 href="vote?for=3511135&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511135></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 11 days ago  | <a href="item?id=3511135">link</a></span></div><br>
<span class="comment"><font color=#000000>&#62; a single keystream is not a secure message exchange protocol<p>I have to build protocols around making sure to not re-use parts of my One Time Pad.  Around making sure that I validate messages.  Asking for a re-send of a message.  Destroy the One Time Pad because it's been compromised, etc.<p>But at it's core, using a One Time Pad is a secure message exchange protocol.  I'm surprised to see you contradict that.<p>&#62; and that conventional cryptography has well-tested ways of linking confidentiality secrets to integrity secrets and of marshalling and canonicalizing messages<p>I'm sorry - I don't know what you mean.  Can you explain it to me more simply?<p>Cryptotext = Plaintext XOR OneTimePad.<p>Plaintext = Cryptotext XOR OneTimePad.<p>As I said, I have a lot of work to do to handle my One Time Pad...  But the fundamental mathematics are secure.  And you seem to be saying they are not.  What do you mean?<p>&#62; None of this has much to do with QC,<p>Agreed - that's why I called it a tangent.</font></span><p><font size=1><u><a href="reply?id=3511135&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3511145 href="vote?for=3511145&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511145></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511145">link</a></span></div><br>
<span class="comment"><font color=#000000>The difference between a stream of bytes and a "message" is crucial, and if you don't understand it, the best reason you shouldn't do your Drobo OTP scheme is that you don't understand crypto well enough to implement any cryptosystem. Just use TLS.<p>(I don't mean to be offensive. I don't understand bioinformatics, for instance, and probably shouldn't build mission critical things that rely on it.)</font></span><p><font size=1><u><a href="reply?id=3511145&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3511439 href="vote?for=3511439&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511439></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 11 days ago  | <a href="item?id=3511439">link</a></span></div><br>
<span class="comment"><font color=#000000>I'm not proposing that you buy my system - I'm asking what's wrong with my design for the core mechanic.<p>And you've genuinely offered no substantive critiques.  Sounds like the core mechanic is gold, then.<p>If there's nothing wrong with the core mechanic, I should be able to buy a commercial system built on it, and know that it has all of the inherent strengths and weaknesses of my core mechanic.  And possibly more weaknesses, inherent in the implementation of any security system.</font></span><p><font size=1><u><a href="reply?id=3511439&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=160></td><td valign=top><center><a id=up_3511455 href="vote?for=3511455&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511455></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511455">link</a></span></div><br>
<span class="comment"><font color=#000000>Thank you. It's people like you who are steadily paying for my kids' college education. :)<p>I don't blame you for being frustrated with my responses, but it's my experience that detailed critiques of random crypto schemes on message boards are counterproductive; the designer just "yes, but"'s the critique until all the low-hanging fruit is picked (each of which was a devastating flaw in their original scheme), and the conversation ends with a no- less- fatally- flawed system and a designer who is perversely <i>more</i> confident.</font></span><p><font size=1><u><a href="reply?id=3511455&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=200></td><td valign=top><center><a id=up_3511607 href="vote?for=3511607&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511607></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=VikingCoder">VikingCoder</a> 11 days ago  | <a href="item?id=3511607">link</a></span></div><br>
<span class="comment"><font color=#000000>People are using Quantum Entanglement to exchange keys.<p>I'm proposing a hard drive and a plane ticket.<p>Your critique is based upon ego alone.</font></span><p><font size=1><u><a href="reply?id=3511607&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=160></td><td valign=top><center><a id=up_3511529 href="vote?for=3511529&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511529></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=mindslight">mindslight</a> 11 days ago  | <a href="item?id=3511529">link</a></span></div><br>
<span class="comment"><font color=#000000>For one, you don't have a MAC. This means an attacker can flip arbitrary bits in your message. There's a huge difference between crypto primitives and a crypto system.<p>(It seems like it should be possible to devise a non-algorithmic MAC using a second pad. But now we're back in theory-land.)</font></span><p><font size=1><u><a href="reply?id=3511529&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=200></td><td valign=top><center><a id=up_3511537 href="vote?for=3511537&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511537></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511537">link</a></span></div><br>
<span class="comment"><font color=#000000><i>(It might be possible to devise a non-algorithmic MAC using a second pad, hmm.)</i><p>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA!</font></span><p><font size=1><u><a href="reply?id=3511537&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=240></td><td valign=top><center><a id=up_3511600 href="vote?for=3511600&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511600></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=mindslight">mindslight</a> 11 days ago  | <a href="item?id=3511600">link</a></span></div><br>
<span class="comment"><font color=#000000>College prices are always rising.</font></span><p><font size=1><u><a href="reply?id=3511600&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=280></td><td valign=top><center><a id=up_3511620 href="vote?for=3511620&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511620></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511620">link</a></span></div><br>
<span class="comment"><font color=#000000>My scheme only works if I don't die of an aneurysm first.</font></span><p><font size=1><u><a href="reply?id=3511620&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3510709 href="vote?for=3510709&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3510709></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3510709">link</a> | <a href="item?id=3509731">parent</a> | on: <a href="item?id=3509731">Comcast Explains Why NASA's Web Site Was Blocked L...</a></span></div><br>
<span class="comment"><font color=#000000>Gee, it's not like you can search for [tptacek dnssec] in the search bar down there and see me howling at the moon for years about how likely this stuff is to happen.<p>(<a href="http://www.hnsearch.com/search#request/comments&#38;q=tptacek+dnssec&#38;sortby=create_ts+desc" rel="nofollow">http://www.hnsearch.com/search#request/comments&#38;q=tptace...</a>)<p>When an SSL certificate fails to validate, your browser is prepared to kick off a whole UI state machine to allow you to decide whether to visit the site or not. That's because HTTP, at least as used by browsers, is an application-layer protocol.<p>DNS is an infrastructure protocol. It's like a dial tone; it's there or it isn't. Programs are built on the assumption that if DNS isn't working, either the site doesn't exist, or your Internet connection is misconfigured.<p>Protocols like DNSSEC work on the faulty assumption that trust is a binary thing; either a site's name is good or it isn't. In fact, trust is the product of a series of policy decisions. It's something that needs to be expressed at the application layer. DNS is simply the wrong place to host security policy.</font></span><p><font size=1><u><a href="reply?id=3510709&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3511017 href="vote?for=3511017&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511017></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=smackfu">smackfu</a> 11 days ago  | <a href="item?id=3511017">link</a></span></div><br>
<span class="comment"><font color=#000000>For 99% of users, they don't have the ability to evaluate levels of trust, so it should be a binary thing.  If an alternative to DNSSEC just put a message up or an icon by the URL bar, sure it wouldn't have blocked NASA, but it wouldn't block anything malicious either.</font></span><p><font size=1><u><a href="reply?id=3511017&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3511049 href="vote?for=3511049&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511049></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511049">link</a></span></div><br>
<span class="comment"><font color=#000000>It's not that the DNSSEC model deprives my mom of the ability to make sensible decisions. It's that it deprives people like you of the opportunity to write programs to express sensible decisions that you are qualified to make.<p>We can fix the most glaring problem with HTTPS/TLS in userland code by building things like Moxie Marlinspike's Convergence scheme; instead of allowing browser vendors and huge companies like Verisign to entirely own the decision of whose certificates are to be trusted, instead allow interested parties to create and share their own trust policies.<p>This does not actually change any part of the HTTPS/TLS protocol. The CA certificate validation of TLS is out-of-band; it works based on decisions made by browser vendors.<p>In the post-Moxie world, my mom doesn't decide whether RapidSSL is a trustworthy verifier for MAIL.GOOGLE.COM; instead, her system is simply configured to rely on a trust community --- perhaps run by volunteers for EFF, or by Google, or someone else.<p>DNSSEC is brittle and does not allow for this level of expressiveness. Under DNSSEC, in 2010, Ghadafi controls all names under .LY, full stop. You can't implement "trust agility" to get around it: that static brittle trust model is baked into the core of the Internet.<p>That's a bad thing.</font></span><p><font size=1><u><a href="reply?id=3511049&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=40></td><td valign=top><center><a id=up_3510840 href="vote?for=3510840&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3510840></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tbrownaw">tbrownaw</a> 11 days ago  | <a href="item?id=3510840">link</a></span></div><br>
<span class="comment"><font color=#000000>Doesn't DNSSEC allow for a way for the client to request results-plus-validation-details instead of just results-if-valid?</font></span><p><font size=1><u><a href="reply?id=3510840&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=80></td><td valign=top><center><a id=up_3510877 href="vote?for=3510877&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3510877></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3510877">link</a></span></div><br>
<span class="comment"><font color=#000000>The "clients" in DNSSEC are stub resolvers that just speak normal DNS. The deployment model for the protocol is that end stations don't even know DNSSEC exists. They're just programs calling "gethostbyname()". You could "allow for" anything from a bit in the DNS header to an HTTP REST web service to provide information about DNSSEC failures, but what does that matter to the millions and millions of lines of software that are built on the assumption that DNS either (a) works or (b) doesn't?<p>What's funny is that this is a debate we had 2 years ago, you &#38; I, where I said "DNSSEC will cause sites to disappear from the Internet because clients don't actually speak DNSSEC, caches do it on their behalf", and you said "but Cricket Liu wrote a blog post on how clients can use the CD and AD bits to do their own DNSSEC"† --- and here we are commenting on a story about how NASA disappeared from the Internet (for Comcast DNSSEC clients) and we're still acting like this is a debatable point.<p>It's not. It's obvious from the architecture of the system: either we forklift out all the code written to the original DNS service model (ie, all the code that does DNS everywhere), or we accept that DNSSEC will cause total site outages in every case where TLS causes popups.<p>† <i>(This itself kind of a silly point, right, because you could also just install a full DNSSEC cache on every host on the Internet and claim that as the answer to this problem.)</i></font></span><p><font size=1><u><a href="reply?id=3510877&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3511284 href="vote?for=3511284&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511284></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=colmmacc">colmmacc</a> 11 days ago  | <a href="item?id=3511284">link</a></span></div><br>
<span class="comment"><font color=#000000>It's entirely valid for a client to set the CD bit and to perform its own DNSSEC validation, instead of relying on a recursive cache.<p>It's not particularly common today, but it is the ultimate expression of DNSSEC.<p>Browsers have already moved far beyond the "gethostbyname()" [1] API, and typically implement their own stub resolvers with support for better round-robin load balancing, pre-fetching, and forward collapsing (permitting connection sharing between names that ultimately resolve to the same IP). There's no reason DNSSEC validation can't be part of a browser.<p>[1] So has almost everyone, getaddrinfo() is the more common equivalent call today.</font></span><p><font size=1><u><a href="reply?id=3511284&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=160></td><td valign=top><center><a id=up_3511346 href="vote?for=3511346&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511346></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511346">link</a></span></div><br>
<span class="comment"><font color=#000000>I'm not suggesting that DNSSEC validation can't be part of a browser; I'm suggesting that it isn't part of a browser, or part of virtually any other computer program that uses the DNS. Tens of thousands of programs have been built to variants of the BSD socket interface, none of which automatically admit to DNSSEC. You could just as easily suggest that we'll all have IPv6 support, just as soon as every piece of software that assumes an IP address is 4 bytes long gets updated.<p>But it's actually worse than IPv6, because all IPv6 does (as far as a socket program is concerned) is make IP addresses bigger. DNSSEC requires the application to implement a new state machine to handle the case where validation of a name fails, and implement the UI to handle the user's input to that state machine.<p>Also, I object to the notion that end-system DNSSEC validation is "the ultimate expression of DNSSEC". No; the IETF spent years trying to standardize <i>alternatives</i> to end-systems doing DNSSEC (like TSIG), and many of the same standards people objected to the idea of end-systems implementing full recursive resolvers (load on the roots, etc). It's only when the "last mile" of DNSSEC comes under scrutiny that they suddenly decide we should all be running full caches after all.<p>(gethostbyname, getaddrinfo, same problem; like I said, you might just as productively offer failure/alternative information over HTTP REST, because getting that information into real-world programs requires significant code changes no matter what).</font></span><p><font size=1><u><a href="reply?id=3511346&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=200></td><td valign=top><center><a id=up_3511441 href="vote?for=3511441&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511441></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=colmmacc">colmmacc</a> 11 days ago  | <a href="item?id=3511441">link</a></span></div><br>
<span class="comment"><font color=#000000>DNSSEC validation is part of chrome;<p><a href="http://www.imperialviolet.org/2011/06/16/dnssecchrome.html" rel="nofollow">http://www.imperialviolet.org/2011/06/16/dnssecchrome.html</a><p>DNSSEC is about end-to-end authenticity for DNS data, and one of those ends is the user application, so it's understandable that a burden of responsibility would shift towards it. TSIG is about transport security, it's not about data authenticity, I wouldn't describe it as an alternative - it is complementary to DNSSEC.<p>If DNSSEC succeeds, then doubtless there will be some successful in-application libraries and APIs for performing this - and those state machines won't be something we all have to worry about. But yes, it does shift the work-load.</font></span><p><font size=1><u><a href="reply?id=3511441&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=240></td><td valign=top><center><a id=up_3511481 href="vote?for=3511481&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511481></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 11 days ago  | <a href="item?id=3511481">link</a></span></div><br>
<span class="comment"><font color=#000000>No, a single feature that exploits DNSSEC validation is part of Chrome.<p>Securing DNS with "end-to-end authenticity for DNS data" is like securing the web by signing every individual web page.</font></span><p><font size=1><u><a href="reply?id=3511481&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=280></td><td valign=top><center><a id=up_3511630 href="vote?for=3511630&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511630></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=danyork">danyork</a> 11 days ago  | <a href="item?id=3511630">link</a></span></div><br>
<span class="comment"><font color=#000000>Plugins/extensions are available now for both Chrome and Firefox that provide a visual indicator in the address bar:<p><a href="http://www.internetsociety.org/deploy360/resources/how-to-add-dnssec-support-to-google-chrome/" rel="nofollow">http://www.internetsociety.org/deploy360/resources/how-to-ad...</a><p><a href="http://www.internetsociety.org/deploy360/resources/how-to-add-dnssec-support-to-mozilla-firefox/" rel="nofollow">http://www.internetsociety.org/deploy360/resources/how-to-ad...</a><p>But, to your point, these are not built-in and require a user to actually install the extensions.  And of course, a user can ignore the key icon (as some ignore the lock-in and SSL/TLS popups).</font></span><p><font size=1><u><a href="reply?id=3511630&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=120></td><td valign=top><center><a id=up_3511295 href="vote?for=3511295&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3511295></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=danyork">danyork</a> 11 days ago  | <a href="item?id=3511295">link</a></span></div><br>
<span class="comment"><font color=#000000>So perhaps the larger question is - when will the DNS stub resolvers in the various operating systems get updated to be DNSSEC-aware so that applications <i>could</i> make a request for the DNSSEC information and make those decisions themselves?</font></span><p><font size=1><u><a href="reply?id=3511295&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td valign=top><center><a id=up_3507086 href="vote?for=3507086&dir=up&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50"><img src="http://ycombinator.com/images/grayarrow.gif" border=0 vspace=3 hspace=2></a><span id=down_3507086></span></center></td><td class="default"><div style="margin-top:2px; margin-bottom:-10px; "><span class="comhead"><a href="user?id=tptacek">tptacek</a> 12 days ago  | <a href="item?id=3507086">link</a> | <a href="item?id=3503929">parent</a> | on: <a href="item?id=3503846">Ask HN: Where to start reading on security?</a></span></div><br>
<span class="comment"><font color=#000000>To it, I would probably add "The Tangled Web" by Zalewsky.</font></span><p><font size=1><u><a href="reply?id=3507086&whence=%2f%78%3f%66%6e%69%64%3d%75%59%36%54%51%68%4f%6d%50%50">reply</a></u></font></td></tr></table></td></tr><tr style="height:10px"></tr><tr><td><table border=0><tr><td><img src="http://ycombinator.com/images/s.gif" height=1 width=0></td><td><img src="http://ycombinator.com/images/s.gif" height=1 width=14></td><td class="title"><a href="/x?fnid=BFN6DgrfEW" rel="nofollow">More</a></td></tr></table></td></tr></td></tr><tr><td><img src="http://ycombinator.com/images/s.gif" height=10 width=0><table width="100%" cellspacing=0 cellpadding=1><tr><td bgcolor=#ff6600></td></tr></table><br>
<center><span class="yclinks"><a href="lists">Lists</a> | <a href="rss">RSS</a> | <a href="http://ycombinator.com/bookmarklet.html">Bookmarklet</a> | <a href="http://ycombinator.com/newsguidelines.html">Guidelines</a> | <a href="http://ycombinator.com/newsfaq.html">FAQ</a> | <a href="http://ycombinator.com/newsnews.html">News News</a> | <a href="item?id=363">Feature Requests</a> | <a href="http://ycombinator.com">Y Combinator</a> | <a href="http://ycombinator.com/apply.html">Apply</a> | <a href="http://ycombinator.com/lib.html">Library</a></span><br><br>
<form method=get action="http://www.hnsearch.com/search#request/all">Search: <input type=text name="q" value="" size=17></form><br>
</center></td></tr></table></center></body></html>